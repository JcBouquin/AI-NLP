# PDF Analysis System with LangGraph

## Overview

This project implements a sophisticated document analysis system using LangGraph to process administrative PDF documents, specifically designed for extracting and analyzing delegation of authority documents. The system consists of two complementary workflows that automate the entire document analysis process.

## System Architecture

### Workflow 1: Primary PDF Analysis
**Pipeline:** `Extraction → Analysis → Export`

The first workflow constitutes the core of the document analysis system. It processes PDF documents by applying an innovative contextual segmentation approach.

#### Functionality
1. **Extraction**: PDF reading and preprocessing with automatic text cleaning
2. **Analysis**: LLM model application to identify delegation of authority patterns
3. **Export**: Generation of structured synthesis files

#### Technical Innovation: Batch Processing
A distinctive feature of this workflow lies in its **reduced batch processing** approach. Instead of analyzing the entire document in a single operation, the system segments processing into chunks of 2 pages (configurable to 3 or more).

**Advantages of this approach:**
- **Hallucination elimination**: Context reduction enables the LLM to maintain precision
- **Increased reliability**: Zero interpretation errors observed vs. numerous hallucinations in global processing
- **Quality control**: Validation possible chunk by chunk

**Limitation:**
- Requires multiple workflow executions to process a complete document

### Workflow 2: Secondary Synthesis Analysis
**Pipeline:** `Reading → Formatting → Statistics → Export`

The second workflow leverages results from the first to produce in-depth analyses.

#### Functionality
1. **Reading**: Ingestion of synthesis file generated by Workflow 1
2. **Formatting**: Extraction and structuring of key data
3. **Statistics**: Quantitative analysis and pattern identification
4. **Export**: Generation of distinct analytical reports

## Advanced Prompting Strategy

### Chain of Thought (CoT)
The system implements sophisticated prompting techniques based on reasoning chains. This approach guides the LLM model through a structured thinking process.

**CoT variants used:**
- **Step-back Prompting**: Decomposition of complex tasks into elementary steps
- **Thread of Thought**: Maintaining logical consistency across analyses

### Analogical Prompting
A particular innovation of the system lies in the use of **analogical prompting** for the main analysis node. This technique consists of providing the model with concrete examples similar to the target use case, enabling generalization through analogy.

**Principle:**
- Presentation of typical examples with their complete resolution
- Guidance by example rather than abstract instruction
- Significant improvement in extraction precision

## System Outputs

### Workflow 1
- **Synthesis file**: `{pdf_name}_synthese_{timestamp}.md`
- Consolidation of all chunk-based analyses
- Hierarchical structure with complete metadata

### Workflow 2
- **Formatted report**: `{synthesis}_formatted_{timestamp}.md`
- **Statistical analysis**: `{synthesis}_statistics_{timestamp}.md`
- Automatic timestamping for traceability

## Operational Advantages

### Precision
- **Reduced error rate** through batch processing
- **Multi-level validation** with sequential workflows
- **Terminological consistency** via analogical prompting

### Scalability
- **Modular architecture** enabling adaptation to different document types
- **Parallelizable processing** of chunks for future optimization
- **Extensibility** of statistical analyses

### Traceability
- **Systematic timestamping** of all outputs
- **Preservation of intermediate files** for audit purposes
- **Complete metadata** on processing parameters

## Configuration and Usage

### Main Parameters
```python
pdf_filename = "document.pdf"  # Document to analyze
start_page = 102               # Starting page
end_page = 118                 # Ending page
step = 2                       # Batch size (recommended: 2-3)
```

### Execution
```python
# Workflow 1 - PDF Analysis
result = process_pdf(pdf_filename, start_page, end_page)

# Workflow 2 - Synthesis Analysis (automatic after Workflow 1)
synthesis_result = process_synthesis_analysis(synthesis_file_path)
```

## Technologies Used

- **LangGraph**: Workflow orchestration
- **LangChain**: LLM interface and prompt management
- **OpenAI GPT-4o-mini**: Linguistic analysis engine
- **PDFPlumber**: PDF text extraction
- **Python**: Development environment

## Use Cases

This system is particularly suited for:
- **Complex administrative document analysis**
- **Delegation of authority and responsibility extraction**
- **Organizational audit** and compliance
- **High-volume document processing** with precision requirements

The system demonstrates how advanced prompt engineering and workflow architecture can solve LLM precision challenges in complex document extraction tasks.
